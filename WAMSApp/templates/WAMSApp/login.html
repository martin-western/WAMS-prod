{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>WAMS</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="{% static 'WAMSApp/css/materialize.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<!-- <body background="{% static 'WAMSApp/img/login-bg.jpg' %}" style="background-size: 100%;background-color: rgba(0,0,0,0.5);z-index: 2;"> -->
<body>
{% csrf_token %}

<style type="text/css">
    @font-face {
      font-family: AvenirNext;
      src: url("{% static 'WAMSApp/fonts/Avenir-Next-Font/AvenirNextLTPro-Demi.otf' %}");
    }

    @font-face {
      font-family: AvenirNextBold;
      src: url("{% static 'WAMSApp/fonts/Avenir-Next-Font/AvenirNextLTPro-Bold.otf' %}");
    }


    body{
      font-family: 'AvenirNext';
      background-color: #f7f7f7 !important;
    }
  </style>


<div class="row" style="margin-bottom: 0em;">
  <div class="col s6" style="height: 100vh;background-color: #521893;">
  </div>

  <div class="col s6 white" style="height: 100vh;">

    <div class="row" style="margin-top: 10%;">
      <div class="col s12 center">
        <h4 style = "font-weight: bold !important;margin: 25px 0px 0px 0px !important;    
          font-size: 22px;    
          position: relative;   
          bottom: 5px;">
          <i class="material-icons" style="
          position: relative;   
          top: 5px;   
          right: 10px;
          color: #521893;">layers</i>ROYALFORD</h4>
      </div>
    </div>

    <div class="row" style="margin-top: 15%;">
      <div class="col s12 center">
        <span style="font-family: 'AvenirNext';color:black;">
        </span>
      </div>  
    </div>
    

    <div class="row">
      <div class="col s12 center">
        <span style="font-family: 'AvenirNext';color:grey;letter-spacing: 0.1em;">ACCOUNT LOGIN</span>
      </div>
    </div>

    <div class="row" style="padding:4em;padding-top: 0em;">

      <div class="input-field col s6" style="padding-right: 0em;">
        <input placeholder="Username" id="username" type="text" class="validate" autocomplete="off" style="border: 1px solid #EAEAEA;text-align: center;">
      </div>
      <div class="input-field col s6" style="padding-left: 0em;">
        <input placeholder="Password" id="password" type="password" class="validate" autocomplete="off" style="border: 1px solid #EAEAEA;text-align: center;">
      </div>

      <div class="col s12">
        <a class="waves-effect waves-light btn" href="#!" id="login_btn" style="width: 100%;background-color: #521893;font-size: 10px;height: 4em;padding-top: 0.4em;">Sign In</a>
      </div>
    </div>
  </div>

</div>

  
  <script type="text/javascript" src="{% static 'WAMSApp/js/jquery-3.3.1.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'WAMSApp/js/materialize.js' %}"></script>
  <script type="text/javascript" src="{% static 'WAMSApp/js/select2.min.js' %}">
  </script>
  <script type="text/javascript">

    function getCsrfToken() {
      var CSRF_TOKEN = $('input[name="csrfmiddlewaretoken"]').val();
      return CSRF_TOKEN;
    }

    $("#login_btn").click(function(){
      
        $.ajax({
          url: "/login-submit/",
          type: "POST",
          headers:{
            'X-CSRFToken':getCsrfToken()
          },
          data: {
            username: $("#username").val(),
            password: $("#password").val()
          },
          success: function(response) {
            console.log("Success!", response);
            if(response["status"]==200)
            {
              window.location.pathname = "/products"
            }
            else
            {
              M.toast({html: "The username or password is incorrect!"});
            }
          },
          error: function(xhr, textstatus, errorthrown) {
            console.log("Please report this error: "+errorthrown+xhr.status+xhr.responseText);
          }
        });
    });

    $("#password").keypress(function(e){
      if(e.keyCode==13)
      {
        $("#login_btn").click();
      }
    });

  </script>

</body>
</html>